<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Logunit by thombergs</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Logunit</h1>
          <h2>Test logging output within unit tests</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/thombergs/logunit/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/thombergs/logunit/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/thombergs/logunit" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a name="logunit" class="anchor" href="#logunit"><span class="octicon octicon-link"></span></a>logunit</h3>

<p>logunit is a small and simple framework to allow testing of logging output 
from within unit tests. </p>

<h3>
<a name="code-example" class="anchor" href="#code-example"><span class="octicon octicon-link"></span></a>Code example</h3>

<p>The following example uses JUnit 4 as unit testing framework and log4j as logging framework. Read below for instructions on how to use different frameworks. You can browse a couple of examples <a href="https://github.com/thombergs/logunit/tree/master/logunit-examples/src/test/java/org/wickedsource/logunit/showcase">here</a>.</p>

<p>Basically, you define what logging output you expect before calling the code under test. After the code under test has been executed, you call LogUnit.assertExpectations() to verify that all expectations have been fulfilled.</p>

<pre><code>@Test
public void test() {
  // retrieve the Log4J implementation of LogUnit
  LogUnit logunit = LogUnit.get();

  // use the expect* methods to define what you expect to be logged in
  // your unit test
  logunit.expect("An error occured!", LogLevel.ERROR);

  // produce an error message (in real code you would not do this
  // directly, but call the code under test that does the logging)
  logger.error("An error occured!");

  // assert that the expectations defined earlier were actually fulfilled
  logunit.assertExpectations();
}
</code></pre>

<h3>
<a name="using-log4j" class="anchor" href="#using-log4j"><span class="octicon octicon-link"></span></a>Using log4j</h3>

<p>Using log4j 1.2.x, you should include the following maven module (or download the jar directly):</p>

<h4>
<a name="maven-coordinates" class="anchor" href="#maven-coordinates"><span class="octicon octicon-link"></span></a>Maven coordinates</h4>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.wickedsource&lt;/groupId&gt;
  &lt;artifactId&gt;logunit-log4j12&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>

<h4>
<a name="log4j-configuration" class="anchor" href="#log4j-configuration"><span class="octicon octicon-link"></span></a>log4j configuration</h4>

<p>Configure log4j to use org.wickedsource.logunit.log4j.LogUnitLog4jConsoleAppender as appender. This enables logunit to listen on log events. An example configuration is the following (log4j.properties in the root of the classpath):</p>

<pre><code>log4j.rootLogger=debug, stdout
log4j.appender.stdout=org.wickedsource.logunit.log4j.LogUnitLog4jConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n
</code></pre>

<h3>
<a name="using-logback" class="anchor" href="#using-logback"><span class="octicon octicon-link"></span></a>Using logback</h3>

<p>Using logback, you should include the following maven module (or download the jar directly):</p>

<h4>
<a name="maven-coordinates-1" class="anchor" href="#maven-coordinates-1"><span class="octicon octicon-link"></span></a>Maven coordinates</h4>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.wickedsource&lt;/groupId&gt;
  &lt;artifactId&gt;logunit-logback&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>

<h4>
<a name="logback-configuration" class="anchor" href="#logback-configuration"><span class="octicon octicon-link"></span></a>logback configuration</h4>

<p>Configure logback to use org.wickedsource.logunit.logback.LogUnitLogbackConsoleAppender as appender. This enables logunit to listen on log events. An example configuration is the following (logback.xml in the root of the classpath):</p>

<pre><code>&lt;configuration&gt;
  &lt;appender name="STDOUT" class="org.wickedsource.logunit.logback.LogUnitLogbackConsoleAppender"&gt;
    &lt;encoder&gt;
      &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;
    &lt;/encoder&gt;
  &lt;/appender&gt;
  &lt;root level="debug"&gt;
    &lt;appender-ref ref="STDOUT" /&gt;
  &lt;/root&gt;
&lt;/configuration&gt;
</code></pre>

<h3>
<a name="using-junit-4" class="anchor" href="#using-junit-4"><span class="octicon octicon-link"></span></a>Using JUnit 4</h3>

<p>If you use JUnit 4 as unit testing framework, simply add the following maven module to your classpath (or download the jar directly). It will then be automatically used by the central LogUnit class.</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.wickedsource&lt;/groupId&gt;
  &lt;artifactId&gt;logunit-junit4&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>

<h3>
<a name="using-testng" class="anchor" href="#using-testng"><span class="octicon octicon-link"></span></a>Using TestNG</h3>

<p>If you use TestNG as unit testing framework, simply add the following maven module to your classpath (or download the jar directly). It will then be automatically used by the central LogUnit class.</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.wickedsource&lt;/groupId&gt;
  &lt;artifactId&gt;logunit-testng&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
        </section>

        <footer>
          Logunit is maintained by <a href="https://github.com/thombergs">thombergs</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>