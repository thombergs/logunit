<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Logunit by thombergs</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Logunit</h1>
          <h2>Test logging output within unit tests</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/thombergs/logunit/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/thombergs/logunit/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/thombergs/logunit" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a name="logunit" class="anchor" href="#logunit"><span class="octicon octicon-link"></span></a>logunit</h3>

<p>logunit is a small and simple framework to allow testing of logging output 
from within unit tests. </p>

<h3>
<a name="code-example" class="anchor" href="#code-example"><span class="octicon octicon-link"></span></a>Code example</h3>

<p>The following example uses JUnit 4 as unit testing framework and log4j as logging framework. Read below for instructions on how to use different frameworks. You can browse a couple of examples <a href="https://github.com/thombergs/logunit/tree/master/logunit-examples/src/test/java/org/wickedsource/logunit/showcase">here</a></p>

<div class="highlight highlight-java"><pre><span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// retrieve the Log4J implementation of LogUnit</span>
    <span class="n">LogUnit</span> <span class="n">logunit</span> <span class="o">=</span> <span class="n">LogUnit</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>

    <span class="c1">// use the expect* methods to define what you expect to be logged in</span>
    <span class="c1">// your unit test</span>
    <span class="n">logunit</span><span class="o">.</span><span class="na">expect</span><span class="o">(</span><span class="s">"An error occured!"</span><span class="o">,</span> <span class="n">LogLevel</span><span class="o">.</span><span class="na">ERROR</span><span class="o">);</span>

    <span class="c1">// produce an error message (in real code you would not do this</span>
    <span class="c1">// directly, but call the code under test that does the logging)</span>
    <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"An error occured!"</span><span class="o">);</span>

    <span class="c1">// assert that the expectations defined earlier were actually fulfilled</span>
    <span class="n">logunit</span><span class="o">.</span><span class="na">assertExpectations</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>

<h3>
<a name="using-log4j" class="anchor" href="#using-log4j"><span class="octicon octicon-link"></span></a>Using log4j</h3>

<p>Using log4j 1.2.x, you should include the following maven module (or download the jar directly):</p>

<h4>
<a name="maven-coordinates" class="anchor" href="#maven-coordinates"><span class="octicon octicon-link"></span></a>Maven coordinates</h4>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.wickedsource<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>logunit-log4j12<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<h4>
<a name="log4j-configuration" class="anchor" href="#log4j-configuration"><span class="octicon octicon-link"></span></a>log4j configuration</h4>

<p>Configure log4j to use org.wickedsource.logunit.log4j.LogUnitLog4jConsoleAppender as appender. This enables logunit to listen on log events. An example configuration is the following (log4j.properties in the root of the classpath):</p>

<pre><code>log4j.rootLogger=debug, stdout
log4j.appender.stdout=org.wickedsource.logunit.log4j.LogUnitLog4jConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n
</code></pre>

<h3>
<a name="using-logback" class="anchor" href="#using-logback"><span class="octicon octicon-link"></span></a>Using logback</h3>

<p>Using logback, you should include the following maven module (or download the jar directly):</p>

<h4>
<a name="maven-coordinates-1" class="anchor" href="#maven-coordinates-1"><span class="octicon octicon-link"></span></a>Maven coordinates</h4>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.wickedsource<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>logunit-logback<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<h4>
<a name="logback-configuration" class="anchor" href="#logback-configuration"><span class="octicon octicon-link"></span></a>logback configuration</h4>

<p>Configure logback to use org.wickedsource.logunit.logback.LogUnitLogbackConsoleAppender as appender. This enables logunit to listen on log events. An example configuration is the following (logback.xml in the root of the classpath):</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"STDOUT"</span> <span class="na">class=</span><span class="s">"org.wickedsource.logunit.logback.LogUnitLogbackConsoleAppender"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;encoder&gt;</span>
      <span class="nt">&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="nt">&lt;/pattern&gt;</span>
    <span class="nt">&lt;/encoder&gt;</span>
  <span class="nt">&lt;/appender&gt;</span>
  <span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">"debug"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"STDOUT"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/root&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</pre></div>

<h3>
<a name="using-junit-4" class="anchor" href="#using-junit-4"><span class="octicon octicon-link"></span></a>Using JUnit 4</h3>

<p>If you use JUnit 4 as unit testing framework, simply add the following maven module to your classpath (or download the jar directly). It will then be automatically used by the central LogUnit class.</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.wickedsource<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>logunit-junit4<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<h3>
<a name="using-testng" class="anchor" href="#using-testng"><span class="octicon octicon-link"></span></a>Using TestNG</h3>

<p>If you use TestNG as unit testing framework, simply add the following maven module to your classpath (or download the jar directly). It will then be automatically used by the central LogUnit class.</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.wickedsource<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>logunit-testng<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
        </section>

        <footer>
          Logunit is maintained by <a href="https://github.com/thombergs">thombergs</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>